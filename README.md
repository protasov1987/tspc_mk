# Codex Project

Одностраничное приложение учёта технологических карт с маршрутами операций, локальным хранением данных в браузере и готовой публикацией на GitHub Pages. Для локального или серверного запуска используется минимальный HTTP-сервер на чистом Node.js без внешних зависимостей.

## Структура

- src/ — исходники (HTML, CSS, JS) разделены на отдельные файлы
- .github/workflows/ci.yml — проверка проекта на GitHub Actions
- .github/workflows/pages.yml — публикация статики из `src` на GitHub Pages
- package.json — npm-скрипты для разработки и тестов
- Dockerfile — контейнеризация для быстрого развёртывания

## Быстрый старт

1. Установок не требуется — сервер использует только встроенные модули Node.js.
2. Запустите локальный сервер со статикой:
   npm start

   Сервер слушает порт `3000` по умолчанию. Его можно переопределить переменной `PORT`, а адрес привязки — `HOST` (по умолчанию `0.0.0.0`, чтобы принимать подключения извне).
3. Откройте в браузере `http://localhost:3000`.
4. (Опционально) Скрипт `npm run dev` идентичен `npm start` и запускает тот же сервер.

## Возможности приложения
- Создание, редактирование и удаление технологических карт с автоматической генерацией EAN-13.
- Настройка маршрута операций: выбор операции, участка, исполнителя, планового времени, изменение порядка, удаление.
- Дашборд с быстрыми статистиками, статусами и таймерами текущих операций.
- Поиск по маршрутным квитанциям по номеру карты, названию или заказу.
- Штрихкод в модальном окне и печать.
- Данные хранятся только в браузере (localStorage), поэтому приложение работает офлайн на статическом хостинге.

## Развёртывание в интернете

### GitHub Pages (статический хостинг)
GitHub Pages отдаёт только статику, но всё приложение работает в браузере и хранит данные в `localStorage`.

**Разовый шаг для публикации в новый репозиторий**

1. Создайте пустой репозиторий на GitHub и склонируйте/добавьте его как origin:

   ```bash
   git remote add origin https://github.com/<username>/<repo>.git
   git checkout -B main
   git push -u origin main
   ```

2. В настройках GitHub включите Pages и выберите источник "GitHub Actions".

**Каждое обновление**

1. Коммитим изменения и пушим в `main`:

   ```bash
   git add .
   git commit -m "Deploy update"
   git push
   ```

2. GitHub Actions запустит `.github/workflows/pages.yml` и соберёт статический сайт из папки `src/`.
3. Откройте адрес: `https://<ваш-юзернейм>.github.io/<имя-репозитория>/` (после первого деплоя может понадобиться 1–2 минуты).

### Docker (VPS/облако)
1. Соберите образ:
   docker build -t codex-project .

2. Запустите контейнер, пробросив порт 3000 наружу (можно переназначить на 80/443 за прокси):
   docker run -d -p 80:3000 --name codex-app codex-project

   Сайт станет доступен по публичному IP/домену хоста на порту 80 (например, `http://<ваш-IP>`). При необходимости измените левую часть `-p`.

3. Для HTTPS или нестандартного домена добавьте обратный прокси (Nginx/Caddy/Traefik) к контейнеру.

### Без Docker
1. Скопируйте репозиторий на сервер с установленным Node.js 18+.
2. Запустите: `HOST=0.0.0.0 PORT=3000 npm start`.
3. Настройте проброс порта 80/443 на 3000 через обратный прокси или фаервол.
4. Откройте сайт по публичному IP/домену: `http://<ваш-IP>` или `https://<ваш-домен>` после настройки HTTPS.

> Примечание: В текущем окружении нет доступа к интернету, поэтому фактический деплой выполнить не удалось. Инструкции выше позволяют развернуть приложение на любом доступном хостинге.

## Быстрый пуш в GitHub из терминала

Если нужно выгрузить репозиторий на GitHub без ручного ввода команд, используйте скрипт `scripts/push-to-github.sh`. Он не требует внешних зависимостей и использует HTTPS с токеном.

1. Экспортируйте переменные окружения (токен должен иметь доступ `repo`):

   ```bash
   export GITHUB_USERNAME="<username>"
   export GITHUB_REPO="<repo>"
   export GITHUB_TOKEN="<your_token>"
   # опционально
   export GIT_BRANCH="main"       # имя ветки (по умолчанию main)
   export GITHUB_REMOTE="origin"  # имя удалённого (по умолчанию origin)
   ```

2. Запустите скрипт:

   ```bash
   ./scripts/push-to-github.sh
   ```

Скрипт настроит удалённый репозиторий и выполнит `git push -u <remote> <branch>`. В песочнице токена нет, поэтому фактический пуш здесь не выполняется — используйте свои учётные данные в собственной среде.
